{"mappings":"kwBAAA,IAAAA,EAAAC,EAAA,S,kDASAC,aAAaC,WAAW,6BACxB,IAAMC,EAAUC,SAASC,cAAc,YACjCC,EAAWF,SAASC,cAAc,UAClCE,EAAYH,SAASC,cAAc,QACnCG,EAAcJ,SAASC,cAAc,UACrCI,EAASL,SAASC,cAAc,gBAClCK,EAAU,EAEHC,EAAmB,EACnBC,EAAS,GAKpBC,QAAQC,IAAIC,KAAKC,MAAMf,aAAagB,QAAQ,YAE5C,I,EAAMC,G,EAAoBC,EAAApB,EAAA,CAAAoB,EAAAC,GAAAC,MAAA,SAAAC,I,IAElBC,EAEWC,E,yEAHjBf,EAAOgB,UAAUC,OAAO,U,UACL,EAAAC,EAAAC,aANV,G,UAOGC,OADNN,EAAIO,EAAAC,MACW,C,gDACbP,EAAiCD,EAAjCS,QAAiCT,EAAhBU,aAEzB,EAAAC,EAAAC,cAAaX,GACbf,EAAOgB,UAAUC,OAAO,WACxB,EAAAQ,EAAAE,cAAY,GAEZjC,EAAQkC,iBAAiB,SAAS,SAAAC,GAIjB,KAHf5B,EAAU4B,EAAEC,OAAOC,MAIjB,EAAAN,EAAAO,gBAAe/B,E,4FAKrBH,EAAU8B,iBAAiB,QAAO,W,MAAElB,EAAApB,EAAA,CAAAoB,EAAAC,GAAAC,MAAA,SAAAC,EAAMgB,G,IAIlCf,EAKWC,EAAQkB,EAEnBC,E,yEAVNL,EAAEM,iBACFnC,EAAOgB,UAAUC,OAAO,UACxBd,EAASJ,EAAYqC,MAAMC,O,UACR,EAAAnB,EAAAoB,eAAcnC,EA3BlB,G,UA4BHiB,OADNN,EAAIO,EAAAC,MACW,C,sBACnBtB,EAAOgB,UAAUC,OAAO,U,0BAGlBF,EAAmCD,EAAnCS,QAAiBU,EAAkBnB,EAAlBmB,cACPnB,EAAKmB,cACjBC,EAAa5B,KAAKiC,UAAUN,GAClCzC,aAAagD,QAAQ,4BAA6BN,IAClD,EAAAT,EAAAC,cAAaX,IACb,EAAAU,EAAAE,cAAY,GACZzB,EAAmB,EACnBF,EAAOgB,UAAUC,OAAO,U,4DAhBgBY,G,gCAAR,IAmBlChC,EAAS+B,iBAAiB,SAAS,YACjC,EAAAH,EAAAgB,YAAWxC,E,IAGbQ,G,yFCnEWd,SAASC,cAAc,cACpBD,SAAS+C,eAAe,SACpB/C,SAAS+C,eAAe,aAC/B/C,SAAS+C,eAAe,WACtB/C,SAAS+C,eAAe,UAM9B,SAASC,EAAaC,EAAYC,GACvC,IAAMC,EAAaC,KAAKC,KAAKJ,EAAa,IAC1CxC,QAAQC,IAAIuC,EAAa,eACbE,EACZ,IAAMG,EAAa,GAEnB,GADA7C,QAAQC,IAAIyC,EAAa,cACrBA,GAAc,EAChB,IAAK,IAAII,EAAI,EAAGA,GAAKJ,EAAYI,IAC/BD,EAAWE,KAAKD,OAEb,CACLD,EAAWE,KAAK,GACZN,EAAc,GAAGI,EAAWE,KAAK,OAErC,IAAIC,EAAQL,KAAKM,IAAI,EAAGR,EAAc,GAClCS,EAAMP,KAAKQ,IAAIV,EAAc,EAAGC,EAAa,GAE7CD,IAAgBC,EAAa,IAC/BM,EAAQP,EAAc,EACtBS,EAAMT,GAGR,IAAK,IAAIW,EAAIJ,EAAOI,GAAKF,EAAKE,IAC5BP,EAAWE,KAAKK,GAGdX,EAAcC,EAAa,GAAGG,EAAWE,KAAK,OAClDF,EAAWE,KAAKL,E,CAIlB,OAFA1C,QAAQC,IAAI4C,EAAa,cAElBA,C","sources":["src/js/index.js","src/js/pagination-function.js"],"sourcesContent":["import { getTrending, fetchBySearch, fetchById } from './fetch-functions';\nimport {\n  renderMovies,\n  enableModal,\n  fetchMovieById,\n  btnWatched,\n} from './functions';\nimport { paginationLT } from './pagination-function';\n\nlocalStorage.removeItem('total-results-from-search');\nconst gallery = document.querySelector('.gallery');\nconst btnWatch = document.querySelector('.watch');\nconst btnSubmit = document.querySelector('.btn');\nconst inputSearch = document.querySelector('.input');\nconst loader = document.querySelector('.spiner-cont');\nlet movieId = 0;\n\nexport let selectedBySearch = 0;\nexport let string = '';\n\nlet totalPageSearch = 0;\nlet page = 1;\nlet pageSearch = 1;\nconsole.log(JSON.parse(localStorage.getItem('movies')));\n\nconst getTrendingMovies = async () => {\n  loader.classList.toggle('hidden');\n  const data = await getTrending(page);\n  if (data == undefined) return;\n  const { results: movies, total_pages } = data;\n\n  renderMovies(movies);\n  loader.classList.toggle('hidden');\n  enableModal(false);\n\n  gallery.addEventListener('click', e => {\n    movieId = e.target.id;\n\n    //tenemos el id de la imagen seleccionada\n    if (movieId != '') {\n      fetchMovieById(movieId);\n    }\n  });\n};\n\nbtnSubmit.addEventListener('click', async e => {\n  e.preventDefault();\n  loader.classList.toggle('hidden');\n  string = inputSearch.value.trim();\n  const data = await fetchBySearch(string, pageSearch);\n  if (data == undefined) {\n    loader.classList.toggle('hidden');\n    return;\n  }\n  const { results: movies, total_results } = data;\n  totalPageSearch = data.total_results;\n  const pageString = JSON.stringify(total_results); //convierto en string\n  localStorage.setItem('total-results-from-search', pageString);\n  renderMovies(movies);\n  enableModal(true);\n  selectedBySearch = 1;\n  loader.classList.toggle('hidden');\n});\n\nbtnWatch.addEventListener('click', () => {\n  btnWatched(movieId);\n});\n\ngetTrendingMovies();\n","const refs = {\n  listado: document.querySelector('.pagnumber'),\n  botonAtras: document.getElementById('atras'),\n  botonSiguiente: document.getElementById('siguiente'),\n  pageOne: document.getElementById('primera'),\n  pageFinal: document.getElementById('ultima'),\n};\n\nlet totalPag2 = 0;\nlet currentPage = 1;\n\nexport function paginationLT(totalItems, currentPage) {\n  const totalPages = Math.ceil(totalItems / 20);\n  console.log(totalItems + 'total items');\n  totalPag2 = totalPages;\n  const pagination = [];\n  console.log(totalPages + 'totalpages');\n  if (totalPages <= 9) {\n    for (let i = 1; i <= totalPages; i++) {\n      pagination.push(i);\n    }\n  } else {\n    pagination.push(1);\n    if (currentPage > 2) pagination.push('...');\n\n    let start = Math.max(2, currentPage - 1);\n    let end = Math.min(currentPage + 1, totalPages - 1);\n\n    if (currentPage === totalPages - 2) {\n      start = currentPage - 2;\n      end = currentPage;\n    }\n\n    for (let i = start; i <= end; i++) {\n      pagination.push(i);\n    }\n\n    if (currentPage < totalPages - 2) pagination.push('...');\n    pagination.push(totalPages);\n  }\n  console.log(pagination + 'pagination');\n\n  return pagination;\n}\n"],"names":["$bpxeT","parcelRequire","localStorage","removeItem","$44ae6d9db4eaca0f$var$gallery","document","querySelector","$44ae6d9db4eaca0f$var$btnWatch","$44ae6d9db4eaca0f$var$btnSubmit","$44ae6d9db4eaca0f$var$inputSearch","$44ae6d9db4eaca0f$var$loader","$44ae6d9db4eaca0f$var$movieId","$44ae6d9db4eaca0f$export$fbe26629eb6829e1","$44ae6d9db4eaca0f$export$22b082955e083ec3","console","log","JSON","parse","getItem","$44ae6d9db4eaca0f$var$getTrendingMovies","$parcel$interopDefault","$2TvXO","mark","_callee","data","movies","classList","toggle","$baCzw","getTrending","undefined","_ctx","sent","results","total_pages","$cKDzr","renderMovies","enableModal","addEventListener","e","target","id","fetchMovieById","total_results","pageString","preventDefault","value","trim","fetchBySearch","stringify","setItem","btnWatched","getElementById","$0b52eede00ee47ff$export$31c930f682a93eb8","totalItems","currentPage1","totalPages","Math","ceil","pagination","i","push","start","max","end","min","i1"],"version":3,"file":"index.c419a923.js.map"}