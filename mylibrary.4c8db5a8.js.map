{"mappings":"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","sources":["src/js/library.js","src/js/pagination-function.js"],"sourcesContent":["import {\n  renderMovies,\n  fetchMovieById,\n  enableModal,\n  escKey,\n  reviewLocalStorage,\n} from './functions';\nimport { paginationLT } from './pagination-function';\n\nconst btnW = document.querySelector('.btn-watched');\nconst btnQ = document.querySelector('.btn-queue');\nconst gallery = document.querySelector('.gallery');\nconst btnWatchModal = document.querySelector('.watch');\nconst btnQueueModal = document.querySelector('.queue');\n\nlet movieId = 0;\nconst refs = {\n  listado: document.querySelector('.pagnumber'),\n  botonAtras: document.getElementById('atras'),\n  botonSiguiente: document.getElementById('siguiente'),\n  pageOne: document.getElementById('primera'),\n  pageFinal: document.getElementById('ultima'),\n};\n\nlet currentPage = 1;\nlet extremeButtonsType = 'movies';\n\nconst renderMoviesLibrary = (firstTime, movies, page) => {\n  gallery.innerHTML = '';\n  if (movies.length > 0) {\n    const toRender = [];\n    movies.forEach(movie => {\n      if (movie.page == page) {\n        toRender.push(movie);\n      }\n    });\n    console.log(toRender);\n    renderMovies(toRender);\n    if (firstTime) {\n      enableModal(false);\n      gallery.addEventListener('click', e => {\n        if (e.target.nodeName == 'IMG') {\n          movieId = e.target.id;\n          fetchMovieById(movieId);\n          document.addEventListener('keyup', escKey);\n        }\n      });\n    } else {\n      enableModal(true);\n    }\n  }\n};\n\nconst renderWatchedLocal = param => {\n  const moviesWithPage = addPage('movies');\n  moviescount = moviesWithPage.length;\n  renderLibraryPagination(paginationLT(moviescount, currentPage), 'movies');\n  renderMoviesLibrary(param, moviesWithPage, currentPage);\n};\n\nconst renderQueLocal = param => {\n  const moviesWithPage = addPage('movies-que');\n  moviescount = moviesWithPage.length;\n  renderLibraryPagination(paginationLT(moviescount, currentPage), 'movies-que');\n  renderMoviesLibrary(param, moviesWithPage, currentPage);\n};\n\nbtnQ.addEventListener('click', e => {\n  currentPage = 1;\n  btnQ.classList.add('active');\n  btnW.classList.remove('active');\n  extremeButtonsType = 'movies-que';\n  renderQueLocal(false);\n});\n\nbtnW.addEventListener('click', () => {\n  currentPage = 1;\n  btnW.classList.add('active');\n  btnQ.classList.remove('active');\n  extremeButtonsType = 'movies';\n  renderWatchedLocal(false);\n});\nbtnWatchModal.addEventListener('click', async () => {\n  await reviewLocalStorage(movieId, 'watched');\n  if (btnW.classList.contains('active')) {\n    renderWatchedLocal(false);\n  }\n});\nbtnQueueModal.addEventListener('click', async () => {\n  await reviewLocalStorage(movieId, 'queue');\n  console.log(btnQueueModal);\n  if (btnQ.classList.contains('active')) {\n    renderQueLocal(false);\n  }\n});\ndocument.addEventListener('DOMContentLoaded', () => {\n  btnW.classList.add('active');\n  renderWatchedLocal(true);\n});\n\nfunction renderLibraryPagination(pArray, type) {\n  refs.listado.innerHTML = ''; // Limpiar contenido anterior\n  pArray.forEach(item => {\n    const link = document.createElement('button');\n\n    if (item == currentPage) {\n      link.classList.add('main-color');\n    }\n\n    if (item === '...') {\n      link.textContent = '...';\n    } else {\n      link.textContent = item;\n\n      link.addEventListener('click', () => {\n        currentPage = item;\n        const moviesWithPage = addPage(type);\n        renderMoviesLibrary(false, moviesWithPage, currentPage);\n        renderLibraryPagination(paginationLT(moviescount, currentPage), type);\n      });\n    }\n    refs.listado.appendChild(link);\n  });\n}\n\nlet countMovies = 0;\nlet countPages = 1;\n\nfunction addPage(key) {\n  const movies = JSON.parse(localStorage.getItem(key));\n  console.log('key' + key);\n  movies.forEach(element => {\n    if (countMovies == 20) {\n      countPages++;\n      countMovies = 0;\n    }\n    countMovies++;\n    element.page = countPages;\n  });\n  console.log(movies);\n  totalPag2 = countPages;\n  countMovies = 0;\n  countPages = 1;\n  return movies;\n}\n\nlet moviescount = 0;\n\nrefs.botonAtras.addEventListener('click', async () => {\n  if (currentPage > 1) {\n    currentPage--;\n    const moviesWithPage = addPage(extremeButtonsType);\n    renderMoviesLibrary(false, moviesWithPage, currentPage);\n    renderLibraryPagination(\n      paginationLT(moviescount, currentPage),\n      extremeButtonsType\n    );\n  }\n});\nlet totalPag2;\n\nrefs.botonSiguiente.addEventListener('click', async () => {\n  if (currentPage < totalPag2) {\n    currentPage++;\n    const moviesWithPage = addPage(extremeButtonsType);\n    renderMoviesLibrary(false, moviesWithPage, currentPage);\n    renderLibraryPagination(\n      paginationLT(moviescount, currentPage),\n      extremeButtonsType\n    );\n  }\n});\n","const refs = {\n  listado: document.querySelector('.pagnumber'),\n  botonAtras: document.getElementById('atras'),\n  botonSiguiente: document.getElementById('siguiente'),\n  pageOne: document.getElementById('primera'),\n  pageFinal: document.getElementById('ultima'),\n};\n\nlet totalPag2 = 0;\nlet currentPage = 1;\n\nexport function paginationLT(totalItems, currentPage) {\n  const totalPages = Math.ceil(totalItems / 20);\n  totalPag2 = totalPages;\n  const pagination = [];\n  if (totalPages <= 9) {\n    for (let i = 1; i <= totalPages; i++) {\n      pagination.push(i);\n    }\n  } else {\n    pagination.push(1);\n    if (currentPage > 2) pagination.push('...');\n\n    let start = Math.max(2, currentPage - 1);\n    let end = Math.min(currentPage + 1, totalPages - 1);\n\n    if (currentPage === totalPages - 2) {\n      start = currentPage - 2;\n      end = currentPage;\n    }\n\n    for (let i = start; i <= end; i++) {\n      pagination.push(i);\n    }\n\n    if (currentPage < totalPages - 2) pagination.push('...');\n    pagination.push(totalPages);\n  }\n  return pagination;\n}\n"],"names":["$bpxeT","parcelRequire","document","querySelector","getElementById","$0b52eede00ee47ff$export$31c930f682a93eb8","totalItems","currentPage1","totalPages","Math","ceil","pagination","i","push","start","max","end","min","i1","$93effc6fc56091ad$var$btnW","$93effc6fc56091ad$var$btnQ","$93effc6fc56091ad$var$gallery","$93effc6fc56091ad$var$btnWatchModal","$93effc6fc56091ad$var$btnQueueModal","$93effc6fc56091ad$var$movieId","$93effc6fc56091ad$var$refs","listado","botonAtras","botonSiguiente","pageOne","pageFinal","$93effc6fc56091ad$var$currentPage","$93effc6fc56091ad$var$extremeButtonsType","$93effc6fc56091ad$var$renderMoviesLibrary","firstTime","movies","page","innerHTML","length","toRender","forEach","movie","console","log","$cKDzr","renderMovies","enableModal","addEventListener","e","target","nodeName","id","fetchMovieById","escKey","$93effc6fc56091ad$var$renderWatchedLocal","param","moviesWithPage","$93effc6fc56091ad$var$addPage","$93effc6fc56091ad$var$renderLibraryPagination","$93effc6fc56091ad$var$moviescount","$93effc6fc56091ad$var$renderQueLocal","pArray","type","item","link","createElement","classList","add","textContent","appendChild","remove","$parcel$interopDefault","$2TvXO","mark","_callee","reviewLocalStorage","contains","$93effc6fc56091ad$var$countMovies","$93effc6fc56091ad$var$countPages","key","JSON","parse","localStorage","getItem","element","$93effc6fc56091ad$var$totalPag2"],"version":3,"file":"mylibrary.4c8db5a8.js.map"}