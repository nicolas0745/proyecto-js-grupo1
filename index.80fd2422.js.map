{"mappings":"qsBAAA,IAAAA,EAAAC,EAAA,S,wBASAC,aAAaC,WAAW,6BACxB,MAAMC,EAAUC,SAASC,cAAc,YACjCC,EAAWF,SAASC,cAAc,UAClCE,EAAYH,SAASC,cAAc,QACnCG,EAAcJ,SAASC,cAAc,UACrCI,EAASL,SAASC,cAAc,gBACtC,IAAIK,EAAU,EAEHC,EAAmB,EACnBC,EAAS,GAEhBC,EAAkB,EAGtBC,QAAQC,IAAIC,KAAKC,MAAMhB,aAAaiB,QAAQ,YAsB5CX,EAAUY,iBAAiB,SAASC,MAAMC,IACxCA,EAAEC,iBACFb,EAAOc,UAAUC,OAAO,UACxBZ,EAASJ,EAAYiB,MAAMC,OAC3B,MAAMC,QAAa,EAAA5B,EAAA6B,eAAchB,EA3BlB,GA4Bf,GAAYiB,MAARF,EAEF,YADAlB,EAAOc,UAAUC,OAAO,UAG1B,MAAQM,QAASC,EAAMC,cAAEA,GAAkBL,EAC3Cd,EAAkBc,EAAKK,cACvB,MAAMC,EAAajB,KAAKkB,UAAUF,GAClC/B,aAAakC,QAAQ,4BAA6BF,IAClD,EAAAG,EAAAC,cAAaN,IACb,EAAAK,EAAAE,cAAY,GACZ3B,EAAmB,EACnBF,EAAOc,UAAUC,OAAO,SAAS,IAGnClB,EAASa,iBAAiB,SAAS,MACjC,EAAAiB,EAAAG,YAAW7B,EAAQ,IAxCKU,WACxBX,EAAOc,UAAUC,OAAO,UACxB,MAAMG,QAAa,EAAA5B,EAAAyC,aANV,GAOT,GAAYX,MAARF,EAAmB,OACvB,MAAQG,QAASC,EAAMU,YAAEA,GAAgBd,GAEzC,EAAAS,EAAAC,cAAaN,GACbtB,EAAOc,UAAUC,OAAO,WACxB,EAAAY,EAAAE,cAAY,GAEZnC,EAAQgB,iBAAiB,SAASE,IAChCX,EAAUW,EAAEqB,OAAOC,GAGJ,IAAXjC,IACF,EAAA0B,EAAAQ,gBAAelC,EAAQ,GAEzB,EA0BJmC,E,yFCnEWzC,SAASC,cAAc,cACpBD,SAAS0C,eAAe,SACpB1C,SAAS0C,eAAe,aAC/B1C,SAAS0C,eAAe,WACtB1C,SAAS0C,eAAe,UAGrC,IAAIC,EAAY,EAGT,SAASC,EAAaC,EAAYC,GACvC,MAAMC,EAAaC,KAAKC,KAAKJ,EAAa,IAC1CnC,QAAQC,IAAIkC,EAAa,eACzBF,EAAYI,EACZ,MAAMG,EAAa,GAEnB,GADAxC,QAAQC,IAAIoC,EAAa,cACrBA,GAAc,EAChB,IAAK,IAAII,EAAI,EAAGA,GAAKJ,EAAYI,IAC/BD,EAAWE,KAAKD,OAEb,CACLD,EAAWE,KAAK,GACZN,EAAc,GAAGI,EAAWE,KAAK,OAErC,IAAIC,EAAQL,KAAKM,IAAI,EAAGR,EAAc,GAClCS,EAAMP,KAAKQ,IAAIV,EAAc,EAAGC,EAAa,GAE7CD,IAAgBC,EAAa,IAC/BM,EAAQP,EAAc,EACtBS,EAAMT,GAGR,IAAK,IAAIK,EAAIE,EAAOF,GAAKI,EAAKJ,IAC5BD,EAAWE,KAAKD,GAGdL,EAAcC,EAAa,GAAGG,EAAWE,KAAK,OAClDF,EAAWE,KAAKL,E,CAIlB,OAFArC,QAAQC,IAAIuC,EAAa,cAElBA,C","sources":["src/js/index.js","src/js/pagination-function.js"],"sourcesContent":["import { getTrending, fetchBySearch, fetchById } from './fetch-functions';\nimport {\n  renderMovies,\n  enableModal,\n  fetchMovieById,\n  btnWatched,\n} from './functions';\nimport { paginationLT } from './pagination-function';\n\nlocalStorage.removeItem('total-results-from-search');\nconst gallery = document.querySelector('.gallery');\nconst btnWatch = document.querySelector('.watch');\nconst btnSubmit = document.querySelector('.btn');\nconst inputSearch = document.querySelector('.input');\nconst loader = document.querySelector('.spiner-cont');\nlet movieId = 0;\n\nexport let selectedBySearch = 0;\nexport let string = '';\n\nlet totalPageSearch = 0;\nlet page = 1;\nlet pageSearch = 1;\nconsole.log(JSON.parse(localStorage.getItem('movies')));\n\nconst getTrendingMovies = async () => {\n  loader.classList.toggle('hidden');\n  const data = await getTrending(page);\n  if (data == undefined) return;\n  const { results: movies, total_pages } = data;\n\n  renderMovies(movies);\n  loader.classList.toggle('hidden');\n  enableModal(false);\n\n  gallery.addEventListener('click', e => {\n    movieId = e.target.id;\n\n    //tenemos el id de la imagen seleccionada\n    if (movieId != '') {\n      fetchMovieById(movieId);\n    }\n  });\n};\n\nbtnSubmit.addEventListener('click', async e => {\n  e.preventDefault();\n  loader.classList.toggle('hidden');\n  string = inputSearch.value.trim();\n  const data = await fetchBySearch(string, pageSearch);\n  if (data == undefined) {\n    loader.classList.toggle('hidden');\n    return;\n  }\n  const { results: movies, total_results } = data;\n  totalPageSearch = data.total_results;\n  const pageString = JSON.stringify(total_results); //convierto en string\n  localStorage.setItem('total-results-from-search', pageString);\n  renderMovies(movies);\n  enableModal(true);\n  selectedBySearch = 1;\n  loader.classList.toggle('hidden');\n});\n\nbtnWatch.addEventListener('click', () => {\n  btnWatched(movieId);\n});\n\ngetTrendingMovies();\n","const refs = {\n  listado: document.querySelector('.pagnumber'),\n  botonAtras: document.getElementById('atras'),\n  botonSiguiente: document.getElementById('siguiente'),\n  pageOne: document.getElementById('primera'),\n  pageFinal: document.getElementById('ultima'),\n};\n\nlet totalPag2 = 0;\nlet currentPage = 1;\n\nexport function paginationLT(totalItems, currentPage) {\n  const totalPages = Math.ceil(totalItems / 20);\n  console.log(totalItems + 'total items');\n  totalPag2 = totalPages;\n  const pagination = [];\n  console.log(totalPages + 'totalpages');\n  if (totalPages <= 9) {\n    for (let i = 1; i <= totalPages; i++) {\n      pagination.push(i);\n    }\n  } else {\n    pagination.push(1);\n    if (currentPage > 2) pagination.push('...');\n\n    let start = Math.max(2, currentPage - 1);\n    let end = Math.min(currentPage + 1, totalPages - 1);\n\n    if (currentPage === totalPages - 2) {\n      start = currentPage - 2;\n      end = currentPage;\n    }\n\n    for (let i = start; i <= end; i++) {\n      pagination.push(i);\n    }\n\n    if (currentPage < totalPages - 2) pagination.push('...');\n    pagination.push(totalPages);\n  }\n  console.log(pagination + 'pagination');\n\n  return pagination;\n}\n"],"names":["$br7ue","parcelRequire","localStorage","removeItem","$85a5f86b715fe7db$var$gallery","document","querySelector","$85a5f86b715fe7db$var$btnWatch","$85a5f86b715fe7db$var$btnSubmit","$85a5f86b715fe7db$var$inputSearch","$85a5f86b715fe7db$var$loader","$85a5f86b715fe7db$var$movieId","$85a5f86b715fe7db$export$fbe26629eb6829e1","$85a5f86b715fe7db$export$22b082955e083ec3","$85a5f86b715fe7db$var$totalPageSearch","console","log","JSON","parse","getItem","addEventListener","async","e","preventDefault","classList","toggle","value","trim","data","fetchBySearch","undefined","results","movies","total_results","pageString","stringify","setItem","$gXu43","renderMovies","enableModal","btnWatched","getTrending","total_pages","target","id","fetchMovieById","$85a5f86b715fe7db$var$getTrendingMovies","getElementById","$b996e0125cc63fcc$var$totalPag2","$b996e0125cc63fcc$export$31c930f682a93eb8","totalItems","currentPage1","totalPages","Math","ceil","pagination","i","push","start","max","end","min"],"version":3,"file":"index.80fd2422.js.map"}