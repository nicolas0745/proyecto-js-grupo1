{"mappings":"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","sources":["src/js/library.js","src/js/pagination-function.js"],"sourcesContent":["import {\n  renderMovies,\n  fetchMovieById,\n  enableModal,\n  escKey,\n  reviewLocalStorage,\n} from './functions';\nimport { paginationLT } from './pagination-function';\n\nconst btnW = document.querySelector('.btn-watched');\nconst btnQ = document.querySelector('.btn-queue');\nconst gallery = document.querySelector('.gallery');\nconst btnWatchModal = document.querySelector('.watch');\nconst btnQueueModal = document.querySelector('.queue');\n\nlet movieId = 0;\nconst refs = {\n  listado: document.querySelector('.pagnumber'),\n  botonAtras: document.getElementById('atras'),\n  botonSiguiente: document.getElementById('siguiente'),\n  pageOne: document.getElementById('primera'),\n  pageFinal: document.getElementById('ultima'),\n};\n\nlet currentPage = 1;\nlet extremeButtonsType = 'movies';\n\nconst renderMoviesLibrary = (firstTime, movies, page) => {\n  gallery.innerHTML = '';\n  if (movies.length > 0) {\n    const toRender = [];\n    movies.forEach(movie => {\n      if (movie.page == page) {\n        toRender.push(movie);\n      }\n    });\n    console.log(toRender);\n    renderMovies(toRender);\n    if (firstTime) {\n      enableModal(false);\n      gallery.addEventListener('click', e => {\n        if (e.target.nodeName == 'IMG') {\n          movieId = e.target.id;\n          fetchMovieById(movieId);\n          document.addEventListener('keyup', escKey);\n        }\n      });\n    } else {\n      enableModal(true);\n    }\n  }\n};\n\nconst renderWatchedLocal = param => {\n  const moviesWithPage = addPage('movies');\n  moviescount = moviesWithPage.length;\n  renderLibraryPagination(paginationLT(moviescount, currentPage), 'movies');\n  renderMoviesLibrary(param, moviesWithPage, currentPage);\n};\n\nconst renderQueLocal = param => {\n  const moviesWithPage = addPage('movies-que');\n  moviescount = moviesWithPage.length;\n  renderLibraryPagination(paginationLT(moviescount, currentPage), 'movies-que');\n  renderMoviesLibrary(param, moviesWithPage, currentPage);\n};\n\nbtnQ.addEventListener('click', e => {\n  currentPage = 1;\n  btnQ.classList.add('active');\n  btnW.classList.remove('active');\n  extremeButtonsType = 'movies-que';\n  renderQueLocal(false);\n});\n\nbtnW.addEventListener('click', () => {\n  currentPage = 1;\n  btnW.classList.add('active');\n  btnQ.classList.remove('active');\n  extremeButtonsType = 'movies';\n  renderWatchedLocal(false);\n});\nbtnWatchModal.addEventListener('click', async () => {\n  await reviewLocalStorage(movieId, 'watched');\n  if (btnW.classList.contains('active')) {\n    renderWatchedLocal(false);\n  }\n});\nbtnQueueModal.addEventListener('click', async () => {\n  await reviewLocalStorage(movieId, 'queue');\n  console.log(btnQueueModal);\n  if (btnQ.classList.contains('active')) {\n    renderQueLocal(false);\n  }\n});\ndocument.addEventListener('DOMContentLoaded', () => {\n  btnW.classList.add('active');\n  renderWatchedLocal(true);\n});\n\nfunction renderLibraryPagination(pArray, type) {\n  refs.listado.innerHTML = ''; // Limpiar contenido anterior\n  pArray.forEach(item => {\n    const link = document.createElement('button');\n\n    if (item == currentPage) {\n      link.classList.add('main-color');\n    }\n\n    if (item === '...') {\n      link.textContent = '...';\n    } else {\n      link.textContent = item;\n\n      link.addEventListener('click', () => {\n        currentPage = item;\n        const moviesWithPage = addPage(type);\n        renderMoviesLibrary(false, moviesWithPage, currentPage);\n        renderLibraryPagination(paginationLT(moviescount, currentPage), type);\n      });\n    }\n    refs.listado.appendChild(link);\n  });\n}\n\nlet countMovies = 0;\nlet countPages = 1;\n\nfunction addPage(key) {\n  const movies = JSON.parse(localStorage.getItem(key));\n  console.log('key' + key);\n  movies.forEach(element => {\n    if (countMovies == 20) {\n      countPages++;\n      countMovies = 0;\n    }\n    countMovies++;\n    element.page = countPages;\n  });\n  console.log(movies);\n  totalPag2 = countPages;\n  countMovies = 0;\n  countPages = 1;\n  return movies;\n}\n\nlet moviescount = 0;\n\nrefs.botonAtras.addEventListener('click', async () => {\n  if (currentPage > 1) {\n    currentPage--;\n    const moviesWithPage = addPage(extremeButtonsType);\n    renderMoviesLibrary(false, moviesWithPage, currentPage);\n    renderLibraryPagination(\n      paginationLT(moviescount, currentPage),\n      extremeButtonsType\n    );\n  }\n});\nlet totalPag2;\n\nrefs.botonSiguiente.addEventListener('click', async () => {\n  if (currentPage < totalPag2) {\n    currentPage++;\n    const moviesWithPage = addPage(extremeButtonsType);\n    renderMoviesLibrary(false, moviesWithPage, currentPage);\n    renderLibraryPagination(\n      paginationLT(moviescount, currentPage),\n      extremeButtonsType\n    );\n  }\n});\n","const refs = {\n  listado: document.querySelector('.pagnumber'),\n  botonAtras: document.getElementById('atras'),\n  botonSiguiente: document.getElementById('siguiente'),\n  pageOne: document.getElementById('primera'),\n  pageFinal: document.getElementById('ultima'),\n};\n\nlet totalPag2 = 0;\nlet currentPage = 1;\n\nexport function paginationLT(totalItems, currentPage) {\n  const totalPages = Math.ceil(totalItems / 20);\n  totalPag2 = totalPages;\n  const pagination = [];\n  if (totalPages <= 9) {\n    for (let i = 1; i <= totalPages; i++) {\n      pagination.push(i);\n    }\n  } else {\n    pagination.push(1);\n    if (currentPage > 2) pagination.push('...');\n\n    let start = Math.max(2, currentPage - 1);\n    let end = Math.min(currentPage + 1, totalPages - 1);\n\n    if (currentPage === totalPages - 2) {\n      start = currentPage - 2;\n      end = currentPage;\n    }\n\n    for (let i = start; i <= end; i++) {\n      pagination.push(i);\n    }\n\n    if (currentPage < totalPages - 2) pagination.push('...');\n    pagination.push(totalPages);\n  }\n  return pagination;\n}\n"],"names":["$gXu43","parcelRequire","document","querySelector","getElementById","$b996e0125cc63fcc$var$totalPag2","$b996e0125cc63fcc$export$31c930f682a93eb8","totalItems","currentPage1","totalPages","Math","ceil","pagination","i","push","start","max","end","min","$1cafa503bc57b7a0$var$btnW","$1cafa503bc57b7a0$var$btnQ","$1cafa503bc57b7a0$var$gallery","$1cafa503bc57b7a0$var$btnWatchModal","$1cafa503bc57b7a0$var$btnQueueModal","$1cafa503bc57b7a0$var$movieId","$1cafa503bc57b7a0$var$refs","listado","botonAtras","botonSiguiente","pageOne","pageFinal","$1cafa503bc57b7a0$var$currentPage","$1cafa503bc57b7a0$var$extremeButtonsType","$1cafa503bc57b7a0$var$renderMoviesLibrary","firstTime","movies","page","innerHTML","length","toRender","forEach","movie","console","log","renderMovies","enableModal","addEventListener","e","target","nodeName","id","fetchMovieById","escKey","$1cafa503bc57b7a0$var$renderWatchedLocal","param","moviesWithPage","$1cafa503bc57b7a0$var$addPage","$1cafa503bc57b7a0$var$moviescount","$1cafa503bc57b7a0$var$renderLibraryPagination","$1cafa503bc57b7a0$var$renderQueLocal","pArray","type","item","link","createElement","classList","add","textContent","appendChild","remove","async","reviewLocalStorage","contains","$1cafa503bc57b7a0$var$countMovies","$1cafa503bc57b7a0$var$countPages","key","JSON","parse","localStorage","getItem","element","$1cafa503bc57b7a0$var$totalPag2"],"version":3,"file":"mylibrary.e172ab91.js.map"}