{"mappings":"kwBAAA,IAAAA,EAAAC,EAAA,S,uCASAC,aAAaC,WAAW,6BACxB,I,EAAMC,EAAUC,SAASC,cAAc,YACjCC,EAAWF,SAASC,cAAc,UAClCE,EAAWH,SAASC,cAAc,UAClCG,EAAYJ,SAASC,cAAc,QACnCI,EAAcL,SAASC,cAAc,UACrCK,EAASN,SAASC,cAAc,gBAClCM,EAAU,EAEHC,EAAmB,EACnBC,EAAS,GAMdC,G,EAAoBC,EAAAhB,EAAA,CAAAgB,EAAAC,GAAAC,MAAA,SAAAC,I,IAElBC,EAEWC,E,yEAHjBV,EAAOW,UAAUC,OAAO,U,UACL,EAAAC,EAAAC,aALV,G,UAMGC,OADNN,EAAIO,EAAAC,MACW,C,gDACbP,EAAiCD,EAAjCS,QAAiCT,EAAhBU,aAEzB,EAAAC,EAAAC,cAAaX,IACb,EAAAU,EAAAE,cAAY,GAEZ7B,EAAQ8B,iBAAiB,SAAS,SAAAC,GACP,OAArBA,EAAEC,OAAOC,WACXzB,EAAUuB,EAAEC,OAAOE,IACnB,EAAAP,EAAAQ,gBAAe3B,GACfP,SAAS6B,iBAAiB,QAASH,EAAAS,Q,IAIvC7B,EAAOW,UAAUC,OAAO,U,wFAG1Bd,EAAUyB,iBAAiB,QAAO,W,MAAElB,EAAAhB,EAAA,CAAAgB,EAAAC,GAAAC,MAAA,SAAAC,EAAMgB,G,IAIlCf,EAKWC,EAAQoB,EAEnBC,E,yEAVNP,EAAEQ,iBACFhC,EAAOW,UAAUC,OAAO,UACxBT,EAASJ,EAAYkC,MAAMC,O,UACR,EAAArB,EAAAsB,eAAchC,EA1BlB,G,UA2BHY,OADNN,EAAIO,EAAAC,MACW,C,sBACnBjB,EAAOW,UAAUC,OAAO,U,0BAGlBF,EAAmCD,EAAnCS,QAAiBY,EAAkBrB,EAAlBqB,cACPrB,EAAKqB,cACjBC,EAAaK,KAAKC,UAAUP,GAClCvC,aAAa+C,QAAQ,4BAA6BP,IAClD,EAAAX,EAAAC,cAAaX,IACb,EAAAU,EAAAE,cAAY,GACZpB,EAAmB,EACnBF,EAAOW,UAAUC,OAAO,U,4DAhBgBY,G,gCAAR,IAmBlC5B,EAAS2B,iBAAiB,SAAS,YACjC,EAAAH,EAAAmB,oBAAmBtC,EAAS,U,IAG9BJ,EAAS0B,iBAAiB,SAAS,YACjC,EAAAH,EAAAmB,oBAAmBtC,EAAS,Q,IAE9BG,G","sources":["src/js/index.js"],"sourcesContent":["import { getTrending, fetchBySearch } from './fetch-functions';\nimport {\n  renderMovies,\n  enableModal,\n  fetchMovieById,\n  escKey,\n  reviewLocalStorage,\n} from './functions';\n\nlocalStorage.removeItem('total-results-from-search'); //en review\nconst gallery = document.querySelector('.gallery');\nconst btnWatch = document.querySelector('.watch');\nconst btnQueue = document.querySelector('.queue');\nconst btnSubmit = document.querySelector('.btn');\nconst inputSearch = document.querySelector('.input');\nconst loader = document.querySelector('.spiner-cont');\nlet movieId = 0;\n\nexport let selectedBySearch = 0;\nexport let string = '';\n\nlet totalPageSearch = 0;\nlet page = 1;\nlet pageSearch = 1;\n\nconst getTrendingMovies = async () => {\n  loader.classList.toggle('hidden');\n  const data = await getTrending(page);\n  if (data == undefined) return;\n  const { results: movies, total_pages } = data;\n\n  renderMovies(movies);\n  enableModal(false);\n\n  gallery.addEventListener('click', e => {\n    if (e.target.nodeName == 'IMG') {\n      movieId = e.target.id;\n      fetchMovieById(movieId);\n      document.addEventListener('keyup', escKey);\n    }\n  });\n\n  loader.classList.toggle('hidden');\n};\n\nbtnSubmit.addEventListener('click', async e => {\n  e.preventDefault();\n  loader.classList.toggle('hidden');\n  string = inputSearch.value.trim();\n  const data = await fetchBySearch(string, pageSearch);\n  if (data == undefined) {\n    loader.classList.toggle('hidden');\n    return;\n  }\n  const { results: movies, total_results } = data;\n  totalPageSearch = data.total_results;\n  const pageString = JSON.stringify(total_results); //convierto en string\n  localStorage.setItem('total-results-from-search', pageString);\n  renderMovies(movies);\n  enableModal(true);\n  selectedBySearch = 1;\n  loader.classList.toggle('hidden');\n});\n\nbtnWatch.addEventListener('click', () => {\n  reviewLocalStorage(movieId, 'watched');\n});\n\nbtnQueue.addEventListener('click', () => {\n  reviewLocalStorage(movieId, 'queue');\n});\ngetTrendingMovies();\n"],"names":["$bpxeT","parcelRequire","localStorage","removeItem","$44ae6d9db4eaca0f$var$gallery","document","querySelector","$44ae6d9db4eaca0f$var$btnWatch","$44ae6d9db4eaca0f$var$btnQueue","$44ae6d9db4eaca0f$var$btnSubmit","$44ae6d9db4eaca0f$var$inputSearch","$44ae6d9db4eaca0f$var$loader","$44ae6d9db4eaca0f$var$movieId","$44ae6d9db4eaca0f$export$fbe26629eb6829e1","$44ae6d9db4eaca0f$export$22b082955e083ec3","$44ae6d9db4eaca0f$var$getTrendingMovies","$parcel$interopDefault","$2TvXO","mark","_callee","data","movies","classList","toggle","$baCzw","getTrending","undefined","_ctx","sent","results","total_pages","$cKDzr","renderMovies","enableModal","addEventListener","e","target","nodeName","id","fetchMovieById","escKey","total_results","pageString","preventDefault","value","trim","fetchBySearch","JSON","stringify","setItem","reviewLocalStorage"],"version":3,"file":"index.b672f65f.js.map"}