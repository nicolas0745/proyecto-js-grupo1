{"mappings":"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","sources":["src/js/pagination.js","src/js/pagination-function.js"],"sourcesContent":["import { getTrending, fetchBySearch, fetchById } from './fetch-functions';\nimport { renderMovies, enableModal } from './functions';\nimport { selectedBySearch, string } from './index';\nimport { paginationLT } from './pagination-function';\n\nconst refs = {\n  listado: document.querySelector('.pagnumber'),\n  botonAtras: document.getElementById('atras'),\n  botonSiguiente: document.getElementById('siguiente'),\n  pageOne: document.getElementById('primera'),\n  pageFinal: document.getElementById('ultima'),\n};\n\nconst gallery = document.querySelector('.gallery');\n// const loader = document.querySelector('.dot-spinner');\nconst submit = document.querySelector('.btn');\n\nlet currentPage = 1;\nlet currentPage2 = 1;\nlet totalPag2 = 15;\nlet totalItems;\n\nexport async function firstPagination() {\n  const data = await getTrending(2);\n  totalPag2 = data.total_pages;\n  totalItems = data.total_results;\n  const paginationResult = paginationLT(totalItems, 1);\n  renderPagination(paginationResult);\n}\n\nfirstPagination();\n\nfunction renderAll() {\n  if (selectedBySearch == 0) {\n    const getTrendingMovies = async () => {\n      const data = await getTrending(currentPage);\n      if (data == undefined) return;\n      const { results: movies, total_pages } = data;\n      renderMovies(movies);\n      enableModal(true);\n    };\n    getTrendingMovies();\n  } else {\n    async function renderPage() {\n      string.trim();\n      const data = await fetchBySearch(string, currentPage);\n      const { results: movies, total_pages } = data;\n      renderMovies(movies);\n      enableModal(false);\n    }\n    renderPage();\n  }\n}\n\n// Función para renderizar los números de página en la interfaz\nexport function renderPagination(paginationArray, search) {\n  refs.listado.innerHTML = ''; // Limpiar contenido anterior\n  paginationArray.forEach(item => {\n    const link = document.createElement('button');\n\n    if (item == currentPage) {\n      link.classList.add('main-color');\n    }\n\n    if (item === '...') {\n      link.textContent = '...';\n    } else {\n      link.textContent = item;\n      link.addEventListener('click', () => {\n        currentPage = item;\n        renderAll();\n        const paginationResult = paginationLT(totalItems, currentPage);\n        if (search == true) {\n          enableModal(false);\n          renderPagination(paginationResult, true);\n        } else {\n          renderPagination(paginationResult);\n        }\n      });\n    }\n    refs.listado.appendChild(link);\n  });\n}\n\nrenderPagination(paginationLT(totalItems, currentPage2));\n\n// Asignar eventos a los botones de \"Atrás\" y \"Siguiente\"\nrefs.botonAtras.addEventListener('click', async () => {\n  if (currentPage > 1) {\n    currentPage--;\n    const paginationResult = paginationLT(totalItems, currentPage);\n    renderPagination(paginationResult);\n    renderAll();\n  }\n});\n\nrefs.botonSiguiente.addEventListener('click', async () => {\n  if (currentPage < totalPag2) {\n    currentPage++;\n    const paginationResult = paginationLT(totalItems, currentPage);\n    renderPagination(paginationResult);\n    renderAll();\n  }\n});\n\n/* crear la funcion con total_results */\n\nsubmit.addEventListener('click', async e => {\n  e.preventDefault();\n  const data = await fetchBySearch(string, 1);\n  totalPag2 = data.total_pages;\n  totalItems = data.total_results;\n  currentPage = 1;\n  const paginationResult = paginationLT(totalItems, 1);\n  renderPagination(paginationResult, true);\n});\n","const refs = {\n  listado: document.querySelector('.pagnumber'),\n  botonAtras: document.getElementById('atras'),\n  botonSiguiente: document.getElementById('siguiente'),\n  pageOne: document.getElementById('primera'),\n  pageFinal: document.getElementById('ultima'),\n};\n\nlet totalPag2 = 0;\nlet currentPage = 1;\n\nexport function paginationLT(totalItems, currentPage) {\n  const totalPages = Math.ceil(totalItems / 20);\n  totalPag2 = totalPages;\n  const pagination = [];\n  if (totalPages <= 9) {\n    for (let i = 1; i <= totalPages; i++) {\n      pagination.push(i);\n    }\n  } else {\n    pagination.push(1);\n    if (currentPage > 2) pagination.push('...');\n\n    let start = Math.max(2, currentPage - 1);\n    let end = Math.min(currentPage + 1, totalPages - 1);\n\n    if (currentPage === totalPages - 2) {\n      start = currentPage - 2;\n      end = currentPage;\n    }\n\n    for (let i = start; i <= end; i++) {\n      pagination.push(i);\n    }\n\n    if (currentPage < totalPages - 2) pagination.push('...');\n    pagination.push(totalPages);\n  }\n  return pagination;\n}\n"],"names":["$bpxeT","parcelRequire","document","querySelector","getElementById","$0b52eede00ee47ff$export$31c930f682a93eb8","totalItems","currentPage1","totalPages","Math","ceil","pagination","i","push","start","max","end","min","i1","$dfaf77c789ce7a24$var$totalItems","$dfaf77c789ce7a24$var$refs","listado","botonAtras","botonSiguiente","pageOne","pageFinal","$dfaf77c789ce7a24$var$submit","$dfaf77c789ce7a24$var$currentPage","$dfaf77c789ce7a24$var$totalPag2","$dfaf77c789ce7a24$var$_firstPagination","$parcel$interopDefault","$2TvXO","mark","_callee","data","$baCzw","getTrending","_ctx","sent","total_pages","total_results","$dfaf77c789ce7a24$export$825408fbca4f2040","apply","this","arguments","$dfaf77c789ce7a24$var$renderAll","$5TAx9","selectedBySearch","getTrendingMovies","movies","undefined","results","$cKDzr","renderMovies","enableModal","_renderPage","string","trim","fetchBySearch","renderPage","paginationArray","search","innerHTML","forEach","item","link","createElement","classList","add","textContent","addEventListener","paginationResult","appendChild","$dfaf77c789ce7a24$export$2499202e1f693e68","e","preventDefault"],"version":3,"file":"index.d1ff9166.js.map"}